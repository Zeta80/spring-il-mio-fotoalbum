<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity6">
<head>
  <meta charset="UTF-8">

  <div th:replace="~{fragments/link :: link}"></div>

  <title>Photos</title>
</head>

<body>
<header th:replace="~{fragments/navbar :: navbar('photos', ${keyword}, true)}"></header>

<main>
  <div class="container">
    <h3 th:text="|Hi ${loggedUser.firstName}|"></h3>

    <h1>FOTO</h1>

    <a th:href="@{/photos/create}" class="btn btn-success " title="add photo" sec:authorize="hasAuthority('ADMIN')">
      <i class="fa-solid fa-plus"></i>
    </a>

    <div th:replace="~{fragments/message :: message}" ></div>

    <table>
      <thead>
      <tr>
        <th>Id</th>
        <th>Titolo</th>
        <th>Descrizione</th>
        <th>Immagine</th>
        <th>Azioni</th>

      </tr>
      </thead>
      <tbody>
      <tr th:if="${!list.isEmpty()}" th:each="photo : ${list}" th:object="${photo}">
        <td th:text="*{id}"></td>
        <td th:text="*{title}"></td>
        <td th:text="*{description}"></td>
        <td style="max-height: 50px;"> <img th:src="*{url}" > </td>
        <td>

          <a th:href="@{|/photos/*{id}|}">
            <i class="fa-solid fa-eye"></i>
          </a>

          <a th:href="@{|/photos/edit/*{id}|}" sec:authorize="hasAuthority('ADMIN')">
          <i class="fa-solid fa-pencil"></i>
          </a>

          <a th:href="@{|/photos/delete/*{id}|}" sec:authorize="hasAuthority('ADMIN')">
            <i class="fa-solid fa-trash"></i>
          </a>

        </td>

      </tr>
      <tr th:if="${list.isEmpty()}">
        <td colspan="4"> Scusa, nessuna foto da mostrare</td>
      </tr>
      </tbody>
    </table>

  </div>
</main>

</body>
</html>